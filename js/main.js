//preloader
var $container = $("#container"),
    $loadedImagesCount = $container.find('img').length

function preloadImages(arrayOfImages) {
    $imgArrayLength = arrayOfImages.length;
    $(arrayOfImages).each(function () {
        $('<img />').attr('src',this).appendTo('#container').css('display','none');
    });

	
 $("#container img").load(function(){
      $loadedImagesCount++
      $imageLoadPercentage = Math.round((100*$loadedImagesCount/$imgArrayLength))
      $imageLoadPercentageTLprogress = (.01*$imageLoadPercentage)
      TweenMax.to($("#progressBar"), .25, {scaleX:$imageLoadPercentageTLprogress, transformOrigin: "0px 0px"})
})
                          
preloadImages([
	"img/lightpass/0000.jpg",
	"img/lightpass/0001.jpg",
	"img/lightpass/0002.jpg",
	"img/lightpass/0003.jpg",
	"img/lightpass/0004.jpg",
	"img/lightpass/0005.jpg",
	"img/lightpass/0006.jpg",
	"img/lightpass/0007.jpg",
	"img/lightpass/0008.jpg",
	"img/lightpass/0009.jpg",
	"img/lightpass/0010.jpg",
	"img/lightpass/0011.jpg",
	"img/lightpass/0012.jpg",
	"img/lightpass/0013.jpg",
	"img/lightpass/0014.jpg",
	"img/lightpass/0015.jpg",
	"img/lightpass/0016.jpg",
	"img/lightpass/0017.jpg",
	"img/lightpass/0018.jpg",
	"img/lightpass/0019.jpg",
	"img/lightpass/0020.jpg",
	"img/lightpass/0021.jpg",
	"img/lightpass/0022.jpg",
	"img/lightpass/0023.jpg",
	"img/lightpass/0024.jpg",
	"img/lightpass/0025.jpg",
	"img/lightpass/0026.jpg",
	"img/lightpass/0027.jpg",
	"img/lightpass/0028.jpg",
	"img/lightpass/0029.jpg",
	"img/lightpass/0030.jpg",
	"img/lightpass/0031.jpg",
	"img/lightpass/0032.jpg",
	"img/lightpass/0033.jpg",
	"img/lightpass/0034.jpg",
	"img/lightpass/0035.jpg",
	"img/lightpass/0036.jpg",
	"img/lightpass/0037.jpg",
	"img/lightpass/0038.jpg",
	"img/lightpass/0039.jpg",
	"img/lightpass/0040.jpg",
	"img/lightpass/0041.jpg",
	"img/lightpass/0042.jpg",
	"img/lightpass/0043.jpg",
	"img/lightpass/0044.jpg",
	"img/lightpass/0045.jpg",
	"img/lightpass/0046.jpg",
	"img/lightpass/0047.jpg",
	"img/lightpass/0048.jpg",
	"img/lightpass/0049.jpg",
	"img/lightpass/0050.jpg",
	"img/lightpass/0051.jpg",
	"img/lightpass/0052.jpg",
	"img/lightpass/0053.jpg",
	"img/lightpass/0054.jpg",
	"img/lightpass/0055.jpg",
	"img/lightpass/0056.jpg",
	"img/lightpass/0057.jpg",
	"img/lightpass/0058.jpg",
	"img/lightpass/0059.jpg",
	"img/lightpass/0060.jpg",
	"img/lightpass/0061.jpg",
	"img/lightpass/0062.jpg",
	"img/lightpass/0063.jpg",
	"img/lightpass/0064.jpg",
	"img/lightpass/0065.jpg",
	"img/lightpass/0066.jpg",
	"img/lightpass/0067.jpg",
	"img/lightpass/0068.jpg",
	"img/lightpass/0069.jpg",
	"img/lightpass/0070.jpg",
	"img/lightpass/0071.jpg",
	"img/lightpass/0072.jpg",
	"img/lightpass/0073.jpg",
	"img/lightpass/0074.jpg",
	"img/lightpass/0075.jpg",
	"img/lightpass/0076.jpg",
	"img/lightpass/0077.jpg",
	"img/lightpass/0078.jpg",
	"img/lightpass/0079.jpg",
	"img/lightpass/0080.jpg",
	"img/lightpass/0081.jpg",
	"img/lightpass/0082.jpg",
	"img/lightpass/0083.jpg",
	"img/lightpass/0084.jpg",
	"img/lightpass/0085.jpg",
	"img/lightpass/0086.jpg",
	"img/lightpass/0087.jpg",
	"img/lightpass/0088.jpg",
	"img/lightpass/0089.jpg",
	"img/lightpass/0090.jpg",
	"img/lightpass/0091.jpg",
	"img/lightpass/0092.jpg",
	"img/lightpass/0093.jpg",
	"img/lightpass/0094.jpg",
	"img/lightpass/0095.jpg",
	"img/lightpass/0096.jpg",
	"img/lightpass/0097.jpg",
	"img/lightpass/0098.jpg",
	"img/lightpass/0099.jpg",
	"img/lightpass/0100.jpg",
	"img/lightpass/0101.jpg",
	"img/lightpass/0102.jpg",
	"img/lightpass/0103.jpg",
	"img/lightpass/0104.jpg",
	"img/lightpass/0105.jpg",
	"img/lightpass/0106.jpg",
	"img/lightpass/0107.jpg",
	"img/lightpass/0108.jpg",
	"img/lightpass/0109.jpg",
	"img/lightpass/0110.jpg",
	"img/lightpass/0111.jpg",
	"img/lightpass/0112.jpg",
	"img/lightpass/0113.jpg",
	"img/lightpass/0114.jpg",
	"img/lightpass/0115.jpg",
	"img/lightpass/0116.jpg",
	"img/lightpass/0117.jpg",
	"img/lightpass/0118.jpg",
	"img/lightpass/0119.jpg",
	"img/lightpass/0120.jpg",
	"img/lightpass/0121.jpg",
	"img/lightpass/0122.jpg",
	"img/lightpass/0123.jpg",
	"img/lightpass/0124.jpg",
	"img/lightpass/0125.jpg",
	"img/lightpass/0126.jpg",
	"img/lightpass/0127.jpg",
	"img/lightpass/0128.jpg",
	"img/lightpass/0129.jpg",
	"img/lightpass/0130.jpg",
	"img/lightpass/0131.jpg",
	"img/lightpass/0132.jpg",
	"img/lightpass/0133.jpg",
	"img/lightpass/0134.jpg",
	"img/lightpass/0135.jpg",
	"img/lightpass/0136.jpg",
	"img/lightpass/0137.jpg",
	"img/lightpass/0138.jpg",
	"img/lightpass/0139.jpg",
	"img/lightpass/0140.jpg",
	"img/lightpass/0141.jpg",
	"img/lightpass/0142.jpg",
	"img/lightpass/0143.jpg",
	"img/lightpass/0144.jpg",
	"img/lightpass/0145.jpg",
	"img/lightpass/0146.jpg"
  ])
}


var Duration =  1200

// define images
	var images = [
		"img/lightpass/0000.jpg",
		"img/lightpass/0001.jpg",
		"img/lightpass/0002.jpg",
		"img/lightpass/0003.jpg",
		"img/lightpass/0004.jpg",
		"img/lightpass/0005.jpg",
		"img/lightpass/0006.jpg",
		"img/lightpass/0007.jpg",
		"img/lightpass/0008.jpg",
		"img/lightpass/0009.jpg",
		"img/lightpass/0010.jpg",
		"img/lightpass/0011.jpg",
		"img/lightpass/0012.jpg",
		"img/lightpass/0013.jpg",
		"img/lightpass/0014.jpg",
		"img/lightpass/0015.jpg",
		"img/lightpass/0016.jpg",
		"img/lightpass/0017.jpg",
		"img/lightpass/0018.jpg",
		"img/lightpass/0019.jpg",
		"img/lightpass/0020.jpg",
		"img/lightpass/0021.jpg",
		"img/lightpass/0022.jpg",
		"img/lightpass/0023.jpg",
		"img/lightpass/0024.jpg",
		"img/lightpass/0025.jpg",
		"img/lightpass/0026.jpg",
		"img/lightpass/0027.jpg",
		"img/lightpass/0028.jpg",
		"img/lightpass/0029.jpg",
		"img/lightpass/0030.jpg",
		"img/lightpass/0031.jpg",
		"img/lightpass/0032.jpg",
		"img/lightpass/0033.jpg",
		"img/lightpass/0034.jpg",
		"img/lightpass/0035.jpg",
		"img/lightpass/0036.jpg",
		"img/lightpass/0037.jpg",
		"img/lightpass/0038.jpg",
		"img/lightpass/0039.jpg",
		"img/lightpass/0040.jpg",
		"img/lightpass/0041.jpg",
		"img/lightpass/0042.jpg",
		"img/lightpass/0043.jpg",
		"img/lightpass/0044.jpg",
		"img/lightpass/0045.jpg",
		"img/lightpass/0046.jpg",
		"img/lightpass/0047.jpg",
		"img/lightpass/0048.jpg",
		"img/lightpass/0049.jpg",
		"img/lightpass/0050.jpg",
		"img/lightpass/0051.jpg",
		"img/lightpass/0052.jpg",
		"img/lightpass/0053.jpg",
		"img/lightpass/0054.jpg",
		"img/lightpass/0055.jpg",
		"img/lightpass/0056.jpg",
		"img/lightpass/0057.jpg",
		"img/lightpass/0058.jpg",
		"img/lightpass/0059.jpg",
		"img/lightpass/0060.jpg",
		"img/lightpass/0061.jpg",
		"img/lightpass/0062.jpg",
		"img/lightpass/0063.jpg",
		"img/lightpass/0064.jpg",
		"img/lightpass/0065.jpg",
		"img/lightpass/0066.jpg",
		"img/lightpass/0067.jpg",
		"img/lightpass/0068.jpg",
		"img/lightpass/0069.jpg",
		"img/lightpass/0070.jpg",
		"img/lightpass/0071.jpg",
		"img/lightpass/0072.jpg",
		"img/lightpass/0073.jpg",
		"img/lightpass/0074.jpg",
		"img/lightpass/0075.jpg",
		"img/lightpass/0076.jpg",
		"img/lightpass/0077.jpg",
		"img/lightpass/0078.jpg",
		"img/lightpass/0079.jpg",
		"img/lightpass/0080.jpg",
		"img/lightpass/0081.jpg",
		"img/lightpass/0082.jpg",
		"img/lightpass/0083.jpg",
		"img/lightpass/0084.jpg",
		"img/lightpass/0085.jpg",
		"img/lightpass/0086.jpg",
		"img/lightpass/0087.jpg",
		"img/lightpass/0088.jpg",
		"img/lightpass/0089.jpg",
		"img/lightpass/0090.jpg",
		"img/lightpass/0091.jpg",
		"img/lightpass/0092.jpg",
		"img/lightpass/0093.jpg",
		"img/lightpass/0094.jpg",
		"img/lightpass/0095.jpg",
		"img/lightpass/0096.jpg",
		"img/lightpass/0097.jpg",
		"img/lightpass/0098.jpg",
		"img/lightpass/0099.jpg",
		"img/lightpass/0100.jpg",
		"img/lightpass/0101.jpg",
		"img/lightpass/0102.jpg",
		"img/lightpass/0103.jpg",
		"img/lightpass/0104.jpg",
		"img/lightpass/0105.jpg",
		"img/lightpass/0106.jpg",
		"img/lightpass/0107.jpg",
		"img/lightpass/0108.jpg",
		"img/lightpass/0109.jpg",
		"img/lightpass/0110.jpg",
		"img/lightpass/0111.jpg",
		"img/lightpass/0112.jpg",
		"img/lightpass/0113.jpg",
		"img/lightpass/0114.jpg",
		"img/lightpass/0115.jpg",
		"img/lightpass/0116.jpg",
		"img/lightpass/0117.jpg",
		"img/lightpass/0118.jpg",
		"img/lightpass/0119.jpg",
		"img/lightpass/0120.jpg",
		"img/lightpass/0121.jpg",
		"img/lightpass/0122.jpg",
		"img/lightpass/0123.jpg",
		"img/lightpass/0124.jpg",
		"img/lightpass/0125.jpg",
		"img/lightpass/0126.jpg",
		"img/lightpass/0127.jpg",
		"img/lightpass/0128.jpg",
		"img/lightpass/0129.jpg",
		"img/lightpass/0130.jpg",
		"img/lightpass/0131.jpg",
		"img/lightpass/0132.jpg",
		"img/lightpass/0133.jpg",
		"img/lightpass/0134.jpg",
		"img/lightpass/0135.jpg",
		"img/lightpass/0136.jpg",
		"img/lightpass/0137.jpg",
		"img/lightpass/0138.jpg",
		"img/lightpass/0139.jpg",
		"img/lightpass/0140.jpg",
		"img/lightpass/0141.jpg",
		"img/lightpass/0142.jpg",
		"img/lightpass/0143.jpg",
		"img/lightpass/0144.jpg",
		"img/lightpass/0145.jpg",
		"img/lightpass/0146.jpg"

	];

	// TweenMax can tween any property of any object. We use this object to cycle through the array
	var obj = {curImg: 0};

	// create tween
	var lightpass = TweenMax.to(obj, 0.5,
		{
			curImg: images.length - 1,	// animate propery curImg to number of images
			roundProps: "curImg",				// only integers so it can be used as an array index
			repeat: 0,									// repeat 3 times
			immediateRender: true,			// load first image automatically
			ease: Linear.easeNone,			// show every image the same ammount of time
			onUpdate: function () {
			  $("#myimg").attr("src", images[obj.curImg]); // set the image source
			}
		}
	);

	// init controller
	var controller = new ScrollMagic.Controller();

	// build scene
	var scene = new ScrollMagic.Scene({triggerElement: "#trigger-1", triggerHook: 'onLeave', duration: Duration, offset: 100,})
					.setTween(lightpass)
					.addIndicators() // add indicators (requires plugin)
					.addTo(controller);

	//tween for #trigger 13
	var lightpassscale = new TimelineMax()
	    .addLabel('lightpassscale') 
	    .to("#imagesequence", 1, {scale:.95, ease:Linear.easeNone}, 'lightpassscale'
	    );

	// build scene
	var scene = new ScrollMagic.Scene({triggerElement: "#trigger-2", triggerHook: 'onLeave', duration: Duration, offset: 100,})
					.setTween(lightpassscale)
					.addIndicators() // add indicators (requires plugin)
					.addTo(controller);
